import React from "react";
import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from "react/jsx-runtime";
import { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle, } from '@/components/ui/dialog';
import { Badge } from '@/components/ui/badge';
import { Button } from '@/components/ui/button';
import { ScrollArea } from '@/components/ui/scroll-area';
import { Separator } from '@/components/ui/separator';
import { Clock, Users, Sparkles, Target } from 'lucide-react';
export const EventDetails = ({ event, onClose, onParticipate }) => {
    const formatDateTime = (date) => {
        return new Date(date).toLocaleString('en-US', {
            dateStyle: 'medium',
            timeStyle: 'short'
        });
    };
    return (_jsx(Dialog, { open: true, onOpenChange: onClose, children: _jsxs(DialogContent, { className: "max-w-3xl max-h-[90vh]", children: [_jsxs(DialogHeader, { children: [_jsxs("div", { className: "flex items-center gap-2 mb-2", children: [_jsx(Badge, { variant: "outline", children: event.event_type }), _jsx(Badge, { children: event.severity }), _jsx(Badge, { variant: "secondary", children: event.estimated_impact })] }), _jsx(DialogTitle, { className: "text-2xl", children: event.name }), _jsx(DialogDescription, { className: "text-base", children: event.description })] }), _jsx(ScrollArea, { className: "max-h-[60vh] pr-4", children: _jsxs("div", { className: "space-y-6", children: [_jsxs("div", { children: [_jsxs("h3", { className: "font-semibold mb-2 flex items-center gap-2", children: [_jsx(Sparkles, { className: "w-4 h-4" }), "The Story"] }), _jsx("div", { className: "bg-muted/50 p-4 rounded-lg", children: _jsx("p", { className: "text-sm leading-relaxed whitespace-pre-line", children: event.lore }) })] }), _jsx(Separator, {}), _jsxs("div", { children: [_jsxs("h3", { className: "font-semibold mb-3 flex items-center gap-2", children: [_jsx(Target, { className: "w-4 h-4" }), "Active Effects"] }), _jsx("div", { className: "space-y-2", children: event.effects.map((effect, idx) => (_jsxs("div", { className: "bg-muted/30 p-3 rounded border border-border", children: [_jsxs("div", { className: "flex items-center justify-between mb-1", children: [_jsx("span", { className: "font-medium text-sm", children: effect.effect_type }), _jsxs(Badge, { variant: "outline", children: [effect.duration_hours, "h"] })] }), _jsx("p", { className: "text-sm text-muted-foreground", children: effect.description }), _jsxs("div", { className: "flex items-center gap-4 mt-2 text-xs text-muted-foreground", children: [_jsxs("span", { children: ["Value: ", effect.value] }), _jsxs("span", { children: ["Affects: ", effect.affected_players] })] })] }, idx))) })] }), _jsx(Separator, {}), _jsxs("div", { children: [_jsxs("h3", { className: "font-semibold mb-3 flex items-center gap-2", children: [_jsx(Clock, { className: "w-4 h-4" }), "Event Timeline"] }), _jsxs("div", { className: "grid gap-2 text-sm", children: [_jsxs("div", { className: "flex justify-between", children: [_jsx("span", { className: "text-muted-foreground", children: "Duration:" }), _jsxs("span", { className: "font-medium", children: [event.duration_hours, " hours"] })] }), event.started_at && (_jsxs("div", { className: "flex justify-between", children: [_jsx("span", { className: "text-muted-foreground", children: "Started:" }), _jsx("span", { className: "font-medium", children: formatDateTime(event.started_at) })] })), event.ends_at && (_jsxs("div", { className: "flex justify-between", children: [_jsx("span", { className: "text-muted-foreground", children: "Ends:" }), _jsx("span", { className: "font-medium", children: formatDateTime(event.ends_at) })] }))] })] }), event.requires_participation && (_jsxs(_Fragment, { children: [_jsx(Separator, {}), _jsxs("div", { children: [_jsxs("h3", { className: "font-semibold mb-3 flex items-center gap-2", children: [_jsx(Users, { className: "w-4 h-4" }), "Participation"] }), _jsxs("div", { className: "bg-primary/10 p-4 rounded-lg border border-primary/20", children: [_jsx("p", { className: "text-sm mb-3", children: event.participation_mechanics }), _jsxs("div", { className: "flex items-center justify-between", children: [_jsxs("span", { className: "text-sm text-muted-foreground", children: [event.total_participants, " players participating"] }), event.status === 'active' && (_jsx(Button, { onClick: () => onParticipate(event.event_id), size: "sm", children: "Participate Now" }))] })] })] })] })), _jsxs("div", { children: [_jsx("h3", { className: "font-semibold mb-2", children: "The Architect's Reasoning" }), _jsxs("p", { className: "text-sm text-muted-foreground italic", children: ["\"", event.architect_reasoning, "\""] })] }), _jsx("div", { className: "bg-muted/30 p-3 rounded", children: _jsxs("span", { className: "text-xs text-muted-foreground", children: ["Triggered: ", event.trigger_reason] }) })] }) })] }) }));
};
